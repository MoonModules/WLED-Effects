{
  "meta": {"version": "v033", "start":"program"},
  "program": ["PROGRAM","ID","block"],
  "block" : ["LCURL",{"*": ["statement"]},"RCURL"],
  "statement" : {"|":["variable","assign","function","call","for", "if","block"]},
  "variable" : ["VAR", "ID"],
  "assign" : ["varref","assignoperator", {"?":["expr"]}],
  "assignoperator": [{"|":["ASSIGN+", "ASSIGN-", "ASSIGN*", "ASSIGN/", "PLUSPLUS", "MINMIN", "ASSIGN"]}],
  "function" : ["FUNCTION", "ID", {"?": ["LPAREN", "formals", "RPAREN"]}, "block"],
  "formals" : {"?":["formal",{"*":["COMMA","formal"]}]},
  "formal" : "ID",
  "call" : ["ID", "LPAREN", "actuals", "RPAREN"],
  "actuals": {"?": ["expr", {"*": ["COMMA", "expr"]}]},
  "for": ["FOR", "LPAREN", "assign", "SEMI", "expr", "SEMI", "increment", "RPAREN", "block"],
  "increment": ["assign"],
  "if": ["IF", "LPAREN", "expr", "RPAREN", "block", {"?":["ELSE", "elseBlock"]}],
  "cex": ["QMARK", "expr", "QMARK", "trueExpr", "COLON", "falseExpr"],
  "elseBlock": ["block"],
  "trueExpr": ["expr"],
  "falseExpr": ["expr"],
  "expr" : [ "term", {"*": [{"|": ["PLUS", "MINUS", "EQ", "NEQ", "LT", "LTE", "GT", "GTE"]}, "term"]}],
  "term" : [ "factor", {"*": [{"|": ["MUL", "DIV", "MOD", "BSHIFTL", "BSHIFTR", "AND","OR"]}, "factor"]}],
  "factor" : {"|": [["MINUS", "factor"], "cex","call", "varref", "INTEGER_CONST", "REAL_CONST", ["LPAREN", "expr", "RPAREN"]]},
  "varref": ["ID", {"?": ["LBRACKET", "indices", "RBRACKET"]}],
  "indices" : ["expr", {"*": ["COMMA", "expr"]}],

  "TOKENS":
  {
    "ID": "ID",
    "INTEGER_CONST": "INTEGER_CONST",
    "REAL_CONST": "REAL_CONST",
    "PLUS": "+",
    "MINUS": "-",
    "MUL": "*",
    "DIV": "/",
    "MOD": "%",
    "BSHIFTL": "<<",
    "BSHIFTR": ">>",
    "LPAREN": "(",
    "RPAREN": ")",
    "LBRACKET": "[",
    "RBRACKET": "]",
    "COMMA": ",",
    "EQ": "==",
    "NEQ": "!=",
    "LT": "<",
    "LTE": "<=",
    "GT": ">",
    "GTE": ">=",
    "AND": "&&",
    "OR": "||",
    "SEMI": ";",
    "ASSIGN": "=",
    "ASSIGN+": "+=",
    "ASSIGN-": "-=",
    "ASSIGN*": "*=",
    "ASSIGN/": "/=",
    "PLUSPLUS": "++",
    "MINMIN": "--",

    "PROGRAM": "PROGRAM",
    "INTEGER": "INTEGER",
    "REAL": "REAL",
    "VAR": "VAR",
    "FUNCTION": "FUNCTION",
    "LCURL": "{",
    "RCURL": "}",
    "FOR": "FOR",
    "TO": "TO",
    "DO": "DO",
    "IF": "IF",
    "ELSE": "ELSE",
    "QMARK": "?",
    "COLON": ":"
  },

  "EXTERNALS":
  {
    "ledCount": "",
    "width": "",
    "height": "",
    "setPixelColor": "",
    "leds": "",
    "hsv": "",
    "rgbw": "",

    "setRange": "",
    "fill": "",
    "colorBlend": "",
    "colorWheel": "",
    "colorFromPalette": "",
    "beatSin": "",
    "fadeToBlackBy": "",
    "iNoise": "",
    "fadeOut": "",

    "counter": "",
    "segcolor": "",
    "speedSlider": "",
    "intensitySlider": "",
    "custom1Slider": "",
    "custom2Slider": "",
    "custom3Slider": "",
    "volume": "",
    "fftResult":"",

    "shift": "",
    "circle2D": "",
    "drawLine": "",
    "drawArc": "",

    "constrain": "",
    "map": "",
    "seed": "",
    "random": "",
    "sin": "",
    "cos": "",
    "abs": "",
    "min": "",
    "max": "",
    "floor": "",

    "hour": "",
    "minute": "",
    "second": "",
    "millis": "",

    "time": "",
    "triangle": "",
    "wave": "",
    "square": "",
    "clamp": "",

    "print": "",
    "jsonToPixels":"",
    "frameTime":""
  }

}
